<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO Meta Tags -->
  <title>Cambridge Fractional - Elite Operations Expertise for Start-ups & SMEs</title>
  <meta name="description" content="Cambridge Fractional provides flexible access to top-tier operational leadership for start-ups, scale-ups and SMEs. Strategic planning, operational design, and executive guidance." />
  <meta name="keywords" content="fractional operations, strategic planning, operational design, business leadership, startup consulting, SME operations" />
  <link rel="canonical" href="https://cambridgefractional.com" />
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Cambridge Fractional - Elite Operations Expertise" />
  <meta property="og:description" content="Flexible access to top-tier operational leadership for start-ups, scale-ups and SMEs." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://cambridgefractional.com" />
  <meta property="og:image" content="https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png" />
  
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Cambridge Fractional - Elite Operations Expertise" />
  <meta name="twitter:description" content="Flexible access to top-tier operational leadership for start-ups, scale-ups and SMEs." />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png">
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png">
  
  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://raw.githubusercontent.com">
  <link rel="preconnect" href="https://images.pexels.com">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Critical CSS -->
  <style>
    :root {
      --primary-blue: #425b76;
      --primary-green: #8fa37a;
      --bg-cream: #F8F6F3;
      --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    * {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Inter, sans-serif;
      line-height: 1.6;
    }
    
    /* Optimized animations with reduced motion support */
    @media (prefers-reduced-motion: no-preference) {
      .fade-up {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                    transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .fade-up.visible {
        opacity: 1;
        transform: translateY(0);
      }
      
      .stagger-1 { transition-delay: 0.1s; }
      .stagger-2 { transition-delay: 0.2s; }
      .stagger-3 { transition-delay: 0.3s; }
    }
    
    @media (prefers-reduced-motion: reduce) {
      .fade-up {
        opacity: 1;
        transform: none;
        transition: none;
      }
    }
    
    /* Enhanced focus styles for accessibility */
    button:focus-visible,
    a:focus-visible,
    input:focus-visible,
    textarea:focus-visible {
      outline: 3px solid var(--primary-green);
      outline-offset: 2px;
      border-radius: 4px;
    }
    
    /* Optimized image loading */
    img {
      content-visibility: auto;
    }
    
    .img-loading {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* Improved button styles */
    .btn-primary {
      background: var(--primary-green);
      color: white;
      padding: 0.75rem 2rem;
      border-radius: 9999px;
      font-weight: 500;
      transition: var(--transition-smooth);
      border: none;
      cursor: pointer;
      display: inline-block;
      text-decoration: none;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(143, 163, 122, 0.3);
    }
    
    .btn-secondary {
      background: var(--primary-blue);
      color: white;
      padding: 0.625rem 1.25rem;
      border-radius: 9999px;
      font-weight: 500;
      transition: var(--transition-smooth);
      border: none;
      cursor: pointer;
      display: inline-block;
      text-decoration: none;
    }
    
    .btn-secondary:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(66, 91, 118, 0.3);
    }
    
    /* Enhanced form styles */
    .form-input {
      width: 100%;
      padding: 0.875rem 1rem;
      border-radius: 0.75rem;
      border: 2px solid #e5e7eb;
      font-size: 1rem;
      transition: var(--transition-smooth);
      background: white;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--primary-green);
      box-shadow: 0 0 0 3px rgba(143, 163, 122, 0.1);
    }
    
    .form-input.error {
      border-color: #ef4444;
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
    
    /* Mobile navigation improvements */
    .mobile-menu {
      transform: translateY(-100%);
      transition: transform 0.3s ease-in-out;
    }
    
    .mobile-menu.open {
      transform: translateY(0);
    }
    
    /* Skip link styling */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: var(--primary-green);
      color: white;
      padding: 8px;
      border-radius: 4px;
      text-decoration: none;
      z-index: 1000;
      transition: top 0.3s;
    }
    
    .skip-link:focus {
      top: 6px;
    }
    
    /* Optimized grid layouts */
    .service-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 3.5rem;
    }
    
    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 3rem;
    }
    
    /* Enhanced visual hierarchy */
    .section-heading {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 600;
      color: var(--primary-blue);
      margin-bottom: 3.5rem;
    }
    
    /* Performance optimization for transforms */
    .transform-gpu {
      transform: translateZ(0);
    }
  </style>
</head>
<body class="bg-[#F8F6F3] text-[#425b76] antialiased">

<!-- Skip to main content link for accessibility -->
<a href="#main-content" class="skip-link">
  Skip to main content
</a>

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Cambridge Fractional",
  "url": "https://cambridgefractional.com",
  "logo": "https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png",
  "description": "Cambridge Fractional provides flexible access to top-tier operational leadership for start-ups, scale-ups and SMEs.",
  "founder": {
    "@type": "Person",
    "name": "Gareth",
    "jobTitle": "Founder & Director"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "hello@cambridgefractional.com",
    "contactType": "customer service"
  },
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "9 Caxton House, Broad Street",
    "addressLocality": "Cambridge",
    "postalCode": "CB23 6JN",
    "addressCountry": "GB"
  }
}
</script>

<!-- Header -->
<header class="bg-white/95 backdrop-blur-md sticky top-0 z-50 shadow-sm" role="banner">
  <div class="max-w-6xl mx-auto px-6 flex justify-between items-center h-16">
    <!-- Site Name -->
    <a href="#top" class="text-sm md:text-lg font-bold text-[#425b76] hidden sm:inline transform-gpu" aria-label="Cambridge Fractional - Go to top">
      Cambridge Fractional
    </a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center space-x-4 lg:space-x-6 font-medium text-sm text-[#425b76]" role="navigation" aria-label="Main navigation">
      <a href="#about" class="hover:text-[#8fa37a] transition-colors duration-300">About Us</a>
      <a href="#services" class="hover:text-[#8fa37a] transition-colors duration-300">What We Do</a>
      <a href="#why" class="hover:text-[#8fa37a] transition-colors duration-300">Why Choose Us</a>
      <a href="#founder" class="hover:text-[#8fa37a] transition-colors duration-300">Our Founder</a>
      <a href="#contact" class="btn-primary ml-4 text-sm">
        Get in Touch
      </a>
    </nav>

    <!-- Mobile Menu Button -->
    <button 
      id="menu-toggle" 
      class="md:hidden focus:outline-none p-2 transform-gpu" 
      aria-label="Toggle mobile menu"
      aria-expanded="false"
      aria-controls="mobile-menu"
    >
      <svg class="w-6 h-6 text-[#425b76] transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path class="hamburger-line-1" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16"/>
        <path class="hamburger-line-2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12h16"/>
        <path class="hamburger-line-3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 18h16"/>
      </svg>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <div id="mobile-menu" class="md:hidden mobile-menu px-6 pb-4 bg-white shadow-md" role="navigation" aria-label="Mobile navigation">
    <a href="#about" class="mobile-nav-link block py-2 text-[#425b76] hover:text-[#8fa37a] transition-colors duration-300">About Us</a>
    <a href="#services" class="mobile-nav-link block py-2 text-[#425b76] hover:text-[#8fa37a] transition-colors duration-300">What We Do</a>
    <a href="#why" class="mobile-nav-link block py-2 text-[#425b76] hover:text-[#8fa37a] transition-colors duration-300">Why Choose Us</a>
    <a href="#founder" class="mobile-nav-link block py-2 text-[#425b76] hover:text-[#8fa37a] transition-colors duration-300">Our Founder</a>
    <a href="#contact" class="mobile-nav-link btn-primary mt-3 text-center">
      Get in Touch
    </a>
  </div>
</header>

<main id="main-content">
  <!-- Hero Section -->
  <section id="top" class="min-h-[80vh] flex flex-col items-center justify-center text-center px-6 py-12 bg-[#425b76] text-white relative overflow-hidden" role="banner">
    <img
      src="https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png" 
      alt="Cambridge Fractional Logo" 
      class="mb-6 max-h-60 sm:max-h-80 md:max-h-96 w-auto object-contain fade-up transform-gpu"
      loading="eager"
      width="320"
      height="320"
      fetchpriority="high"
    />
    <h1 class="text-4xl sm:text-5xl md:text-7xl font-bold leading-tight max-w-4xl fade-up stagger-1">
      Operations expertise when you need it.
    </h1>
    <p class="text-lg sm:text-xl mt-6 max-w-2xl text-white/90 fade-up stagger-2">
      Cambridge Fractional gives start-ups, scale-ups and SMEs flexible access to elite operational expertise.
    </p>
    <a href="#about" class="btn-primary mt-10 fade-up stagger-3 text-lg px-10 py-4">
      Learn More
    </a>
  </section>

  <!-- About Section -->
  <section id="about" class="py-24 bg-white" aria-labelledby="about-heading">
    <div class="max-w-6xl mx-auto px-6">
      <h2 id="about-heading" class="section-heading text-center fade-up">About Us.</h2>
      <div class="flex flex-col lg:flex-row items-center gap-12 bg-[#F8F6F3] rounded-3xl p-8 sm:p-12 lg:p-16 fade-up">
        <div class="w-full lg:w-1/2 lg:flex-shrink-0">
          <img 
            src="https://images.pexels.com/photos/3184292/pexels-photo-3184292.jpeg" 
            alt="Professional team collaborating in modern office environment" 
            class="w-full h-auto min-h-[300px] lg:min-h-[400px] rounded-2xl object-cover shadow-lg transform-gpu"
            loading="lazy"
            width="500"
            height="400"
          />
        </div>
        <div class="w-full lg:w-1/2 text-[#425b76] text-lg leading-relaxed space-y-6">
          <p>
            Cambridge Fractional was founded to provide start-ups and SMEs with flexible access to top-tier operational leadership.
          </p>
          <p>
            With over 20 years of experience across technology, education, and public safety, we deliver measurable results through tailored strategies. Our founder has led global initiatives, managed multi-million-pound budgets, and helped businesses align their operations with strategic goals.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section id="services" class="py-24 px-6 bg-[#F8F6F3]" aria-labelledby="services-heading">
    <div class="max-w-6xl mx-auto">
      <h2 id="services-heading" class="section-heading fade-up">What We Do.</h2>
      <div class="service-grid">
        <article class="fade-up">
          <div class="border-t-2 border-[#8fa37a] mb-6" aria-hidden="true"></div>
          <h3 class="text-2xl font-semibold mb-4 text-[#425b76]">Strategic Planning</h3>
          <p class="text-[#425b76]/80 leading-relaxed text-lg">
            Design and deliver strategies that support your purpose, align teams, and drive measurable growth.
          </p>
        </article>
        <article class="fade-up stagger-1">
          <div class="border-t-2 border-[#8fa37a] mb-6" aria-hidden="true"></div>
          <h3 class="text-2xl font-semibold mb-4 text-[#425b76]">Operational Design</h3>
          <p class="text-[#425b76]/80 leading-relaxed text-lg">
            Structure and scale your operations with clarity, systems, and capabilities that deliver efficiency and resilience.
          </p>
        </article>
        <article class="fade-up stagger-2">
          <div class="border-t-2 border-[#8fa37a] mb-6" aria-hidden="true"></div>
          <h3 class="text-2xl font-semibold mb-4 text-[#425b76]">Leadership & Advisory</h3>
          <p class="text-[#425b76]/80 leading-relaxed text-lg">
            Provide interim operational leadership, executive guidance, and build internal capabilities across your team.
          </p>
        </article>
      </div>
    </div>
  </section>

  <!-- Why Choose Us Section -->
  <section id="why" class="py-24 px-6 bg-white" aria-labelledby="why-heading">
    <div class="max-w-6xl mx-auto">
      <h2 id="why-heading" class="section-heading fade-up">Why Choose Cambridge Fractional?</h2>
      <div class="benefits-grid">
        <article class="p-8 bg-[#F8F6F3] rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 fade-up transform-gpu">
          <div class="mb-6" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-[#8fa37a]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7" />
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-4 text-[#425b76]">Proven Expertise</h3>
          <p class="text-[#425b76]/80 leading-relaxed">
            Led large global teams and aligned operations with strategic goals in world-class organisations.
          </p>
        </article>
        <article class="p-8 bg-[#F8F6F3] rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 fade-up stagger-1 transform-gpu">
          <div class="mb-6" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-[#8fa37a]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c1.657 0 3-1.343 3-3S13.657 2 12 2 9 3.343 9 5s1.343 3 3 3zm0 2c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z" />
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-4 text-[#425b76]">Tailored to You</h3>
          <p class="text-[#425b76]/80 leading-relaxed">
            Every business is different. We customise our solutions to match your unique needs and challenges.
          </p>
        </article>
        <article class="p-8 bg-[#F8F6F3] rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 fade-up stagger-2 transform-gpu">
          <div class="mb-6" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-[#8fa37a]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 10h16M4 14h10M4 18h6" />
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-4 text-[#425b76]">Flexible & Scalable</h3>
          <p class="text-[#425b76]/80 leading-relaxed">
            Access top-tier operational support when you need it - scale up or down without the overhead.
          </p>
        </article>
      </div>
    </div>
  </section>

  <!-- Founder Section -->
  <section id="founder" class="py-24 bg-[#F8F6F3]" aria-labelledby="founder-heading">
    <div class="max-w-6xl mx-auto px-6">
      <h2 id="founder-heading" class="section-heading text-center fade-up">Our Founder.</h2>
      <article class="max-w-5xl mx-auto bg-white rounded-3xl p-12 flex flex-col lg:flex-row items-center gap-12 shadow-lg fade-up">
        <img 
          src="https://raw.githubusercontent.com/bobsbadgers/logo/072defd45aba484d8174369e0f162b178fd77521/Portrait.png" 
          alt="Gareth, Founder of Cambridge Fractional - Professional headshot" 
          class="w-48 h-48 rounded-2xl object-cover flex-shrink-0 shadow-md transform-gpu"
          loading="lazy"
          width="192"
          height="192"
        />
        <div class="text-[#425b76] space-y-6">
          <p class="text-lg leading-relaxed">
            Gareth is a strategic and operational leader with over 20 years of experience driving efficiency, governance, and business transformation. Most recently, as Director of Operations & Governance at Arm, he led global initiatives to optimise operations and support significant business growth.
          </p>
          <p class="text-lg leading-relaxed">
            Before joining Arm, Gareth oversaw the production of examination materials for learners in over 160 countries at the University of Cambridge. He also held senior leadership roles in London's policing, spearheading key operational improvements and strategic initiatives.
          </p>
        </div>
      </article>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-24 px-6 bg-white" aria-labelledby="contact-heading">
    <div class="max-w-5xl mx-auto flex flex-col lg:flex-row gap-12">
      <div class="lg:w-2/3 bg-[#F8F6F3] rounded-3xl shadow-lg p-10 fade-up">
        <h2 id="contact-heading" class="section-heading mb-8">Get in Touch.</h2>
        <form action="https://formspree.io/f/mqaqokva" method="POST" class="space-y-6" novalidate aria-label="Contact form">
          <div>
            <label for="name" class="block text-sm font-medium text-[#425b76] mb-2">Your Name *</label>
            <input 
              type="text" 
              id="name"
              name="name" 
              placeholder="Your Name" 
              required 
              aria-required="true"
              class="form-input" 
            />
            <span class="error-message text-red-500 text-sm hidden" role="alert">Please enter your name</span>
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-[#425b76] mb-2">Your Email *</label>
            <input 
              type="email" 
              id="email"
              name="email" 
              placeholder="your.email@example.com" 
              required 
              aria-required="true"
              class="form-input" 
            />
            <span class="error-message text-red-500 text-sm hidden" role="alert">Please enter a valid email address</span>
          </div>
          <div>
            <label for="message" class="block text-sm font-medium text-[#425b76] mb-2">Your Message *</label>
            <textarea 
              id="message"
              name="message" 
              rows="5" 
              placeholder="Tell us about your business and how we can help..." 
              required 
              aria-required="true"
              class="form-input resize-vertical"
            ></textarea>
            <span class="error-message text-red-500 text-sm hidden" role="alert">Please enter your message</span>
          </div>
          <button 
            type="submit" 
            class="btn-primary text-base"
          >
            Send Message
          </button>
        </form>
      </div>
      <div class="lg:w-1/3 flex flex-col justify-between fade-up stagger-1">
        <div class="space-y-4 mb-8">
          <a 
            href="https://www.linkedin.com/company/cambridgefractional" 
            target="_blank" 
            rel="noopener noreferrer"
            class="btn-secondary block text-center"
            aria-label="Connect with Cambridge Fractional on LinkedIn (opens in new tab)"
          >
            Connect on LinkedIn
          </a>
          <a 
            href="mailto:hello@cambridgefractional.com" 
            class="btn-secondary block text-center"
            aria-label="Send email to Cambridge Fractional"
          >
            Email Us
          </a>
        </div>
        <div class="w-full aspect-[4/3] lg:aspect-auto lg:flex-1">
          <img 
            src="https://raw.githubusercontent.com/bobsbadgers/logo/e998b3b6effc39dc47e2ae3f631b6c76e05aefe5/pexels-ivan-drazic-20457695-14267767.jpg" 
            alt="Professional team collaborating in modern workspace" 
            class="rounded-2xl shadow-lg w-full h-full object-cover object-bottom transform-gpu"
            loading="lazy"
            width="400"
            height="600"
          />
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Footer -->
<footer class="bg-[#425b76] text-white py-12" role="contentinfo">
  <div class="max-w-6xl mx-auto px-6 text-center space-y-6">
    <img 
      src="https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png" 
      alt="Cambridge Fractional Logo" 
      class="w-48 h-auto object-contain mx-auto fade-up transform-gpu"
      loading="lazy"
      width="192"
      height="48"
    />
    <div class="text-[#F8F6F3]/80 space-y-3 fade-up stagger-1">
      <p class="font-medium">
        Cambridge Fractional Limited | Company No. 16222409
      </p>
      <address class="not-italic text-sm">
        Registered Office: 9 Caxton House, Broad Street, Cambridge, CB23 6JN
      </address>
      <p class="text-sm">© 2025 Cambridge Fractional. All rights reserved.</p>
    </div>
  </div>
</footer>

<!-- Optimized JavaScript -->
<script>
  // Constants
  const ANIMATION_DURATION = 300;
  const SCROLL_OFFSET = 80;
  
  // Utility functions
  const debounce = (func, wait) => {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  };

  const throttle = (func, limit) => {
    let inThrottle;
    return function() {
      const args = arguments;
      const context = this;
      if (!inThrottle) {
        func.apply(context, args);
        inThrottle = true;
        setTimeout(() => inThrottle = false, limit);
      }
    }
  };

  // Enhanced intersection observer for animations
  const observeElements = () => {
    if (!('IntersectionObserver' in window) || window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      document.querySelectorAll('.fade-up').forEach(el => el.classList.add('visible'));
      return;
    }

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));
  };

  // Mobile menu management
  const initMobileMenu = () => {
    const toggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (!toggle || !mobileMenu) return;

    const toggleMenu = () => {
      const isOpen = mobileMenu.classList.contains('open');
      
      if (isOpen) {
        mobileMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      } else {
        mobileMenu.classList.add('open');
        toggle.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
      }
    };

    const closeMenu = () => {
      mobileMenu.classList.remove('open');
      toggle.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    };

    // Event listeners
    toggle.addEventListener('click', toggleMenu);
    
    document.querySelectorAll('.mobile-nav-link').forEach(link => {
      link.addEventListener('click', closeMenu);
    });

    // Close on outside click
    document.addEventListener('click', (e) => {
      if (!toggle.contains(e.target) && !mobileMenu.contains(e.target)) {
        closeMenu();
      }
    });

    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
        closeMenu();
        toggle.focus();
      }
    });

    // Close on resize
    window.addEventListener('resize', debounce(() => {
      if (window.innerWidth >= 768) closeMenu();
    }, 250));
  };

  // Enhanced form validation
  const initFormValidation = () => {
    const form = document.querySelector('form[action*="formspree"]');
    if (!form) return;

    const validateField = (field) => {
      const value = field.value.trim();
      const errorSpan = field.parentElement.querySelector('.error-message');
      let isValid = true;

      // Clear previous error state
      field.classList.remove('error');
      if (errorSpan) errorSpan.classList.add('hidden');

      // Validation logic
      if (field.hasAttribute('required') && !value) {
        isValid = false;
      } else if (field.type === 'email' && value && !value.includes('@')) {
        isValid = false;
      }

      // Show error state
      if (!isValid) {
        field.classList.add('error');
        if (errorSpan) {
          errorSpan.classList.remove('hidden');
          errorSpan.setAttribute('aria-live', 'polite');
        }
      }

      return isValid;
    };

    // Real-time validation
    form.querySelectorAll('input, textarea').forEach(field => {
      field.addEventListener('blur', () => validateField(field));
      field.addEventListener('input', debounce(() => {
        if (field.classList.contains('error')) validateField(field);
      }, 500));
    });

    // Form submission
    form.addEventListener('submit', (e) => {
      const fields = form.querySelectorAll('input[required], textarea[required]');
      let formIsValid = true;

      fields.forEach(field => {
        if (!validateField(field)) {
          formIsValid = false;
        }
      });

      if (!formIsValid) {
        e.preventDefault();
        const firstError = form.querySelector('.error');
        if (firstError) {
          firstError.focus();
          firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }
    });
  };

  // Smooth scrolling with offset
  const initSmoothScrolling = () => {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = anchor.getAttribute('href');
        
        if (targetId === '#top' || targetId === '#') {
          window.scrollTo({ top: 0, behavior: 'smooth' });
          return;
        }

        const target = document.querySelector(targetId);
        if (target) {
          const offsetTop = target.offsetTop - SCROLL_OFFSET;
          window.scrollTo({ top: offsetTop, behavior: 'smooth' });
        }
      });
    });
  };

  // Performance optimizations
  const optimizePerformance = () => {
    // Lazy load images with intersection observer
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            if (img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
            }
            img.classList.remove('img-loading');
            imageObserver.unobserve(img);
          }
        });
      });

      document.querySelectorAll('img[loading="lazy"]').forEach(img => {
        img.classList.add('img-loading');
        imageObserver.observe(img);
      });
    }

    // Preload critical resources
    const preloadLink = document.createElement('link');
    preloadLink.rel = 'preload';
    preloadLink.as = 'image';
    preloadLink.href = 'https://raw.githubusercontent.com/bobsbadgers/logo/43bd7a7d032abbe7513024e8e922c314222b4e8e/CFWebLogo.png';
    document.head.appendChild(preloadLink);
  };

  // Initialize everything when DOM is ready
  const init = () => {
    observeElements();
    initMobileMenu();
    initFormValidation();
    initSmoothScrolling();
    optimizePerformance();

    // Add loaded class for any additional styling
    document.body.classList.add('loaded');
  };

  // Wait for DOM content to be loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  // Handle page visibility changes for performance
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
      // Pause any running animations when page is hidden
      document.querySelectorAll('.fade-up').forEach(el => {
        el.style.animationPlayState = 'paused';
      });
    } else {
      // Resume animations when page becomes visible
      document.querySelectorAll('.fade-up').forEach(el => {
        el.style.animationPlayState = 'running';
      });
    }
  });
</script>

</body>
</html>